<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- bootstrap css v5.0.2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <!-- bootstrap js v5.0.2 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- main css -->
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/home.css') }}">
    <!-- web title -->
    <title>{{ title }}</title>
</head>

<body>
    <!-- main web views strat -->
    <!-- navbar start -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    {% for item in navbar %}
                    <a class="nav-link" href="{{ item.url }}">{{ item.name }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </nav>
    <!-- navbar end -->
    <!-- container start -->
    <!-- 首頁大標題 -->
    <div class="p-5 text-center bg-light">
        <h1 class="mb-3">目前購買的股票</h1>
        <p class="mb-4">查看您目前持有的股票清單與投資概況。</p>
        <a href="/stock" class="btn btn-primary btn-lg">查看詳情</a>
    </div>

    <!-- 漲跌股票 -->
    <div class="container my-5">
        <h2 class="text-center mb-4">漲跌股票</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
            {% for tickers in info_stock %}
            <div class="col">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">{{ tickers.name }} ({{ tickers.code }})</h5>
                        <p class="card-text">
                            價格: {{ tickers.price }} 元
                            漲幅: <a class="{{ tickers.color }} text-decoration-none">{{ tickers.sign }}</a> {{ tickers.change }}%
                        </p>
                        <p class="card-text">
                            今日開盤: {{ tickers.open }} 元
                            前日收盤: {{ tickers.previous_close }} 元
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>


    <!-- 熱門ETF推薦 -->
    <div class="container my-5">
        <h2 class="text-center mb-4">熱門ETF推薦TOP 5</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
            {% for ticker in hot_etfs %}
            <div class="col">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">{{ ticker.name }} ({{ ticker.ticker }})</h5>
                        <p class="card-text">
                            年化報酬率: {{ ticker.perf['年化報酬率(%)'] }} %<br>
                            波動率: {{ ticker.perf['波動率(%)'] }} %<br>
                            Sharpe比率: {{ ticker.perf['Sharpe比率'] }}<br>
                            最大回撤: {{ ticker.perf['最大回撤(%)'] }} %<br>
                            損益率: {{ ticker.perf['損益率(%)'] }} %
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- 查詢除息率 -->
    <div class="container my-5">
        <h2 class="text-center mb-4">查詢除息率</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <!-- 卡片1 -->
            {% for ticker in tickers %}
            <div class="col">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">{{ticker[1]}}({{ticker[3]}})</h5>
                        <p class="card-text"><a class="text-decoration-none" href="ysearch?ticker={{ticker[2]}}">查詢{{ticker[1]}}-{{ticker[2]}}除息率</a></p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- 新聞 -->
    <div class="container my-5">
        <h2 class="text-center mb-4">新聞</h2>
        <ul class="list-group">
            {% for news in fetch_new %}
                <li class="list-group-item"><a href="{{ news['link'] }}" class="text-decoration-none text-dark">{{ news['title'] }}</a></li>
            {% endfor %}
        </ul>
    </div>
    <!-- container end -->
    <!-- footer start -->
    <footer class="mt-3 bg-light fixed-bottom">
        <div class="text-center">{{ footer }}</div>
    </footer>
    <!-- footer end -->
    <!-- main web view end -->
</body>

</html>